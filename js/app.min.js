"use strict";const isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function isIE(){return ua=navigator.userAgent,ua.indexOf("MSIE")>-1||ua.indexOf("Trident/")>-1}function testWebP(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}isMobile.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc"),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const iconMenu=document.querySelector(".icon-menu"),menuBody=document.querySelector(".menu__body");if(iconMenu&&iconMenu.addEventListener("click",(function(e){document.body.classList.toggle("lock"),iconMenu.classList.toggle("active"),menuBody.classList.toggle("active")})),document.body.classList.contains("_touch")){let e=document.querySelectorAll(".arrow");for(let t=0;t<e.length;t++){let o=e[t].previousElementSibling,n=e[t].nextElementSibling,c=e[t];o.classList.add("parent"),e[t].addEventListener("click",(function(){n.classList.toggle("open"),c.classList.toggle("active")}))}}const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".popup__close");function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__body")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnLock(){setTimeout((function(){for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}popupCloseIcon.forEach(e=>{e.addEventListener("click",(function(t){t.preventDefault(),popupClose(e.closest(".popup"))}))}),document.addEventListener("keydown",(function(e){if("Escape"===e.key){popupClose(document.querySelector(".popup.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msmatchesSelector);let menuLinks=document.querySelectorAll("[data-goto]");if(menuLinks.length>0){function onMenuLinkClick(e){const t=e.target;if(t.dataset.goto&&document.querySelector(t.dataset.goto)){const o=document.querySelector(t.dataset.goto).getBoundingClientRect().top+scrollY;menuBody.classList.contains("active")&&(document.body.classList.remove("lock"),iconMenu.classList.remove("active"),menuBody.classList.remove("active")),window.scrollTo({top:o,behavior:"smooth"}),e.preventDefault()}}menuLinks.forEach(e=>{e.addEventListener("click",onMenuLinkClick)})}async function formSend(e){const t=e.target;e.preventDefault();let o=formValidate(t),n=new FormData(t);if(0===o){t.classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:n});if(e.ok){let o=await e.json();alert(o.message),formPreview.innerHTML="",t.reset(),t.classList.remove("_sending")}else alert("Ошибка"),t.classList.remove("_sending")}else alert("Заполните обязательные поля")}function formValidate(e){let t=0,o=e.querySelectorAll("._req");for(let e=0;e<o.length;e++){const n=o[e];formRemoveError(n),n.classList.contains("phone")?phoneTest(n)&&(formAddError(n),t++):("checkbox"===n.getAttribute("type")&&!1===n.checked||""===n.value)&&(formAddError(n),t++)}return t}function formAddError(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function formRemoveError(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",formSend)})}));const toggler=document.querySelector(".toggler");toggler.addEventListener("click",(function(){document.body.classList.toggle("dark-theme")}));